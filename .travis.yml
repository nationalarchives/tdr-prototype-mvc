language: scala
dist: trusty
jdk: oraclejdk8

services:
  - docker

scala:
  - 2.12.8

script:
  - npm install
  - TDR_BASE_URL=https://d1nd68699jelkh.cloudfront.net npm run build
  - sbt dist

deploy:
  - provider: script
    skip_cleanup: true
    script: bash deploy.sh dev
    on:
      branch: tkAddEnvVarToDocker
  - provider: script
    skip_cleanup: true
    script: bash deploy.sh latest
    on:
      branch: master
